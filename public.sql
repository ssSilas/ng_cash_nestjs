/*
 Navicat Premium Data Transfer

 Source Server         : ng_cash
 Source Server Type    : PostgreSQL
 Source Server Version : 140005
 Source Host           : localhost:5432
 Source Catalog        : ng_cash
 Source Schema         : public

 Target Server Type    : PostgreSQL
 Target Server Version : 140005
 File Encoding         : 65001

 Date: 20/11/2022 16:11:57
*/


-- ----------------------------
-- Sequence structure for accounts_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."accounts_id_seq";
CREATE SEQUENCE "public"."accounts_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;
ALTER SEQUENCE "public"."accounts_id_seq" OWNER TO "postgres";

-- ----------------------------
-- Sequence structure for transactions_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."transactions_id_seq";
CREATE SEQUENCE "public"."transactions_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;
ALTER SEQUENCE "public"."transactions_id_seq" OWNER TO "postgres";

-- ----------------------------
-- Sequence structure for users_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."users_id_seq";
CREATE SEQUENCE "public"."users_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;
ALTER SEQUENCE "public"."users_id_seq" OWNER TO "postgres";

-- ----------------------------
-- Table structure for accounts
-- ----------------------------
DROP TABLE IF EXISTS "public"."accounts";
CREATE TABLE "public"."accounts" (
  "id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "balance" int4 NOT NULL,
  "accountfk" int4
)
;
ALTER TABLE "public"."accounts" OWNER TO "postgres";

-- ----------------------------
-- Records of accounts
-- ----------------------------
BEGIN;
INSERT INTO "public"."accounts" ("id", "balance", "accountfk") VALUES (33, 100, NULL);
INSERT INTO "public"."accounts" ("id", "balance", "accountfk") VALUES (35, 100, NULL);
INSERT INTO "public"."accounts" ("id", "balance", "accountfk") VALUES (36, 100, NULL);
INSERT INTO "public"."accounts" ("id", "balance", "accountfk") VALUES (37, 100, NULL);
INSERT INTO "public"."accounts" ("id", "balance", "accountfk") VALUES (6, 59, NULL);
INSERT INTO "public"."accounts" ("id", "balance", "accountfk") VALUES (38, 161, NULL);
INSERT INTO "public"."accounts" ("id", "balance", "accountfk") VALUES (34, 80, NULL);
INSERT INTO "public"."accounts" ("id", "balance", "accountfk") VALUES (39, 100, NULL);
COMMIT;

-- ----------------------------
-- Table structure for transactions
-- ----------------------------
DROP TABLE IF EXISTS "public"."transactions";
CREATE TABLE "public"."transactions" (
  "id" int4 NOT NULL GENERATED ALWAYS AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "debitedAccountId" int4,
  "creditedAccountId" int4,
  "value" int4 NOT NULL,
  "createdAt" timestamp(6) NOT NULL
)
;
ALTER TABLE "public"."transactions" OWNER TO "postgres";

-- ----------------------------
-- Records of transactions
-- ----------------------------
BEGIN;
INSERT INTO "public"."transactions" ("id", "debitedAccountId", "creditedAccountId", "value", "createdAt") OVERRIDING SYSTEM VALUE VALUES (1, 6, NULL, 59, '2022-11-18 13:46:46');
INSERT INTO "public"."transactions" ("id", "debitedAccountId", "creditedAccountId", "value", "createdAt") OVERRIDING SYSTEM VALUE VALUES (3, 34, NULL, 80, '2022-11-18 19:59:55');
INSERT INTO "public"."transactions" ("id", "debitedAccountId", "creditedAccountId", "value", "createdAt") OVERRIDING SYSTEM VALUE VALUES (4, NULL, 38, 161, '2022-11-18 19:59:55');
INSERT INTO "public"."transactions" ("id", "debitedAccountId", "creditedAccountId", "value", "createdAt") OVERRIDING SYSTEM VALUE VALUES (2, NULL, 34, 141, '2022-11-16 13:46:46');
COMMIT;

-- ----------------------------
-- Table structure for users
-- ----------------------------
DROP TABLE IF EXISTS "public"."users";
CREATE TABLE "public"."users" (
  "id" int4 NOT NULL GENERATED ALWAYS AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "username" varchar(255) COLLATE "pg_catalog"."default" NOT NULL,
  "password" varchar(255) COLLATE "pg_catalog"."default" NOT NULL,
  "accountfk" int4 NOT NULL
)
;
ALTER TABLE "public"."users" OWNER TO "postgres";

-- ----------------------------
-- Records of users
-- ----------------------------
BEGIN;
INSERT INTO "public"."users" ("id", "username", "password", "accountfk") OVERRIDING SYSTEM VALUE VALUES (6, 'teste', '28e952ed27b3ca91a82d741d64c415acdcec6a9f', 6);
INSERT INTO "public"."users" ("id", "username", "password", "accountfk") OVERRIDING SYSTEM VALUE VALUES (32, 'tsse', '2ee1066e0305cb63d95dd603135bf44aa7bc4494', 33);
INSERT INTO "public"."users" ("id", "username", "password", "accountfk") OVERRIDING SYSTEM VALUE VALUES (33, 'silas', '2ee1066e0305cb63d95dd603135bf44aa7bc4494', 34);
INSERT INTO "public"."users" ("id", "username", "password", "accountfk") OVERRIDING SYSTEM VALUE VALUES (34, 'silass', '2ee1066e0305cb63d95dd603135bf44aa7bc4494', 35);
INSERT INTO "public"."users" ("id", "username", "password", "accountfk") OVERRIDING SYSTEM VALUE VALUES (35, 'silasss', '2ee1066e0305cb63d95dd603135bf44aa7bc4494', 36);
INSERT INTO "public"."users" ("id", "username", "password", "accountfk") OVERRIDING SYSTEM VALUE VALUES (36, 'ssilasss', '2ee1066e0305cb63d95dd603135bf44aa7bc4494', 37);
INSERT INTO "public"."users" ("id", "username", "password", "accountfk") OVERRIDING SYSTEM VALUE VALUES (37, 'int', '2ee1066e0305cb63d95dd603135bf44aa7bc4494', 38);
INSERT INTO "public"."users" ("id", "username", "password", "accountfk") OVERRIDING SYSTEM VALUE VALUES (38, 'inasast', '2ee1066e0305cb63d95dd603135bf44aa7bc4494', 39);
COMMIT;

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."accounts_id_seq"
OWNED BY "public"."accounts"."id";
SELECT setval('"public"."accounts_id_seq"', 39, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."transactions_id_seq"
OWNED BY "public"."transactions"."id";
SELECT setval('"public"."transactions_id_seq"', 4, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."users_id_seq"
OWNED BY "public"."users"."id";
SELECT setval('"public"."users_id_seq"', 38, true);

-- ----------------------------
-- Auto increment value for accounts
-- ----------------------------
SELECT setval('"public"."accounts_id_seq"', 39, true);

-- ----------------------------
-- Primary Key structure for table accounts
-- ----------------------------
ALTER TABLE "public"."accounts" ADD CONSTRAINT "accounts_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Auto increment value for transactions
-- ----------------------------
SELECT setval('"public"."transactions_id_seq"', 4, true);

-- ----------------------------
-- Primary Key structure for table transactions
-- ----------------------------
ALTER TABLE "public"."transactions" ADD CONSTRAINT "transactions_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Auto increment value for users
-- ----------------------------
SELECT setval('"public"."users_id_seq"', 38, true);

-- ----------------------------
-- Uniques structure for table users
-- ----------------------------
ALTER TABLE "public"."users" ADD CONSTRAINT "users_username_key" UNIQUE ("username");

-- ----------------------------
-- Primary Key structure for table users
-- ----------------------------
ALTER TABLE "public"."users" ADD CONSTRAINT "users_pkey" PRIMARY KEY ("id");

-- ----------------------------
-- Foreign Keys structure for table accounts
-- ----------------------------
ALTER TABLE "public"."accounts" ADD CONSTRAINT "accounts_accountfk_fkey" FOREIGN KEY ("accountfk") REFERENCES "public"."users" ("id") ON DELETE SET NULL ON UPDATE CASCADE;

-- ----------------------------
-- Foreign Keys structure for table transactions
-- ----------------------------
ALTER TABLE "public"."transactions" ADD CONSTRAINT "credited_accountsf" FOREIGN KEY ("creditedAccountId") REFERENCES "public"."accounts" ("id") ON DELETE CASCADE ON UPDATE NO ACTION;
ALTER TABLE "public"."transactions" ADD CONSTRAINT "debited_accountsfk" FOREIGN KEY ("debitedAccountId") REFERENCES "public"."accounts" ("id") ON DELETE CASCADE ON UPDATE NO ACTION;

-- ----------------------------
-- Foreign Keys structure for table users
-- ----------------------------
ALTER TABLE "public"."users" ADD CONSTRAINT "accountidFk" FOREIGN KEY ("accountfk") REFERENCES "public"."accounts" ("id") ON DELETE CASCADE ON UPDATE NO ACTION;
